<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="day08 Django基础django，web框架，别人写好了一些代码，我们在他的基础实现网站。  Python中常见Web框架：  Django，大而全，内部为我们提供了很多方便的组件，直接调用（积极支持异步非阻塞） Flask，小而精，自己内部提供的少+第三方组件。 tornado&#x2F;sanic&#x2F;fastapi，小而精，自己内部提供的少+第三方组件 + 异步非阻塞  1.环">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2023/11/17/day08%20Django%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="day08 Django基础django，web框架，别人写好了一些代码，我们在他的基础实现网站。  Python中常见Web框架：  Django，大而全，内部为我们提供了很多方便的组件，直接调用（积极支持异步非阻塞） Flask，小而精，自己内部提供的少+第三方组件。 tornado&#x2F;sanic&#x2F;fastapi，小而精，自己内部提供的少+第三方组件 + 异步非阻塞  1.环">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/assets/image-20220511090615700.png">
<meta property="og:image" content="http://example.com/assets/image-20220511093726547.png">
<meta property="og:image" content="http://example.com/assets/image-20220511094243187.png">
<meta property="og:image" content="http://example.com/assets/image-20220511094354137.png">
<meta property="og:image" content="http://example.com/assets/image-20220511095332242.png">
<meta property="og:image" content="http://example.com/assets/image-20220511095456903.png">
<meta property="og:image" content="http://example.com/assets/image-20220511095629332.png">
<meta property="og:image" content="http://example.com/assets/image-20220511100423106.png">
<meta property="og:image" content="http://example.com/assets/image-20220511101638677.png">
<meta property="og:image" content="http://example.com/assets/image-20220511101657141.png">
<meta property="og:image" content="http://example.com/assets/image-20220511111746057.png">
<meta property="og:image" content="http://example.com/assets/image-20220511111812195.png">
<meta property="og:image" content="http://example.com/assets/image-20220511111825229.png">
<meta property="og:image" content="http://example.com/assets/image-20220511111833728.png">
<meta property="og:image" content="http://example.com/assets/image-20220511134219856.png">
<meta property="og:image" content="http://example.com/assets/image-20220511141821859.png">
<meta property="og:image" content="http://example.com/assets/image-20220511142312246.png">
<meta property="og:image" content="http://example.com/assets/image-20220511145938903.png">
<meta property="og:image" content="http://example.com/assets/image-20220511150553058.png">
<meta property="og:image" content="http://example.com/assets/image-20220511150613726.png">
<meta property="og:image" content="http://example.com/assets/image-20220511151336175.png">
<meta property="article:published_time" content="2023-11-17T03:00:41.951Z">
<meta property="article:modified_time" content="2022-05-11T08:37:40.000Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/assets/image-20220511090615700.png">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-day08 Django基础" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/11/17/day08%20Django%E5%9F%BA%E7%A1%80/" class="article-date">
  <time class="dt-published" datetime="2023-11-17T03:00:41.951Z" itemprop="datePublished">2023-11-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="day08-Django基础"><a href="#day08-Django基础" class="headerlink" title="day08 Django基础"></a>day08 Django基础</h1><p>django，web框架，别人写好了一些代码，我们在他的基础实现网站。</p>
<p><img src="/assets/image-20220511090615700.png" alt="image-20220511090615700"></p>
<p>Python中常见Web框架：</p>
<ul>
<li>Django，大而全，内部为我们提供了很多方便的组件，直接调用（积极支持异步非阻塞）</li>
<li>Flask，小而精，自己内部提供的少+第三方组件。</li>
<li>tornado&#x2F;sanic&#x2F;fastapi，小而精，自己内部提供的少+第三方组件 + 异步非阻塞</li>
</ul>
<h2 id="1-环境的搭建"><a href="#1-环境的搭建" class="headerlink" title="1.环境的搭建"></a>1.环境的搭建</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django==3</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">C:\Python39</span><br><span class="line">	scripts</span><br><span class="line">		- pip.exe</span><br><span class="line">		- django-admin.exe    -&gt; 搭建django项目</span><br><span class="line">	Lib</span><br><span class="line">		site-packages</span><br><span class="line">			- django</span><br><span class="line">			- requests</span><br><span class="line">	python.exe</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Python39\Scripts\django-admin.exe   startproject  项目名称</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin  startproject  项目名称</span><br></pre></td></tr></table></figure>



<h3 id="1-1-创建项目"><a href="#1-1-创建项目" class="headerlink" title="1.1 创建项目"></a>1.1 创建项目</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysite</span><br><span class="line">├── manage.py           [管理项目文件，例如：运行、类自动生成数据表]</span><br><span class="line">└── mysite</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── settings.py     [项目配置文件，例如：连接那个数据... ]</span><br><span class="line">    ├── urls.py         [根路由，URL和函数的对应关系  /x1/login -&gt;do_login ]</span><br><span class="line">    ├── asgi.py         [异步运行项目，编写socket，处理网络请求]</span><br><span class="line">    └── wsgi.py         [同步运行项目，编写socket，处理网络请求]</span><br></pre></td></tr></table></figure>





<h3 id="1-2-快速上手"><a href="#1-2-快速上手" class="headerlink" title="1.2 快速上手"></a>1.2 快速上手</h3><p>urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;登录页面&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;login/&#x27;</span>, login),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>



<h3 id="1-3-快速启动"><a href="#1-3-快速启动" class="headerlink" title="1.3 快速启动"></a>1.3 快速启动</h3><p>网站启动起来，通过浏览器就可以访问。</p>
<ul>
<li><p>打开终端并进入项目根目录（看到manage.py）</p>
</li>
<li><p>执行命令，启动网站</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver 127.0.0.1:8000</span><br><span class="line">python manage.py runserver</span><br></pre></td></tr></table></figure></li>
</ul>
<p><img src="/assets/image-20220511093726547.png" alt="image-20220511093726547"></p>
<h3 id="1-4-Pycharm"><a href="#1-4-Pycharm" class="headerlink" title="1.4 Pycharm"></a>1.4 Pycharm</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;pip install django==3</span><br></pre></td></tr></table></figure>

<ul>
<li>创建项目</li>
<li>启动项目</li>
</ul>
<h4 id="1-4-1-创建项目"><a href="#1-4-1-创建项目" class="headerlink" title="1.4.1 创建项目"></a>1.4.1 创建项目</h4><p><img src="/assets/image-20220511094243187.png" alt="image-20220511094243187"></p>
<p><img src="/assets/image-20220511094354137.png" alt="image-20220511094354137"></p>
<h4 id="1-4-2-可能BUG"><a href="#1-4-2-可能BUG" class="headerlink" title="1.4.2 可能BUG"></a>1.4.2 可能BUG</h4><p>是由于pycharm导致。</p>
<p><img src="/assets/image-20220511095332242.png" alt="image-20220511095332242"></p>
<h4 id="1-4-3-编写"><a href="#1-4-3-编写" class="headerlink" title="1.4.3 编写"></a>1.4.3 编写</h4><p><img src="/assets/image-20220511095456903.png" alt="image-20220511095456903"></p>
<h4 id="1-4-4-启动项目"><a href="#1-4-4-启动项目" class="headerlink" title="1.4.4 启动项目"></a>1.4.4 启动项目</h4><p><img src="/assets/image-20220511095629332.png" alt="image-20220511095629332"></p>
<h3 id="1-5-不专业"><a href="#1-5-不专业" class="headerlink" title="1.5 不专业"></a>1.5 不专业</h3><p><img src="/assets/image-20220511100423106.png" alt="image-20220511100423106"></p>
<h3 id="1-6-APP"><a href="#1-6-APP" class="headerlink" title="1.6 APP"></a>1.6 APP</h3><p>在django项目中创建app，在app中编写项目中的具体业务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">day08</span><br><span class="line">├── manage.py           [管理项目文件，例如：运行、类自动生成数据表]</span><br><span class="line">└── day08</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── settings.py     [项目配置文件，例如：连接那个数据... ]</span><br><span class="line">    ├── urls.py         [根路由，URL和函数的对应关系  /x1/login -&gt;do_login ]</span><br><span class="line">    ├── asgi.py         [异步运行项目，编写socket，处理网络请求]</span><br><span class="line">    └── wsgi.py         [同步运行项目，编写socket，处理网络请求]</span><br><span class="line">└── web，网站</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── admin.py        [内部后台管理的配置，不要懂]</span><br><span class="line">    ├── apps.py         [App名字，不要动]</span><br><span class="line">    ├── migrations      [迁移记录，不要修改他，自动生成]</span><br><span class="line">    │   └── __init__.py</span><br><span class="line">    ├── models.py       [数据库，类-&gt;SQL语句（ORM）]        【经常使用】</span><br><span class="line">    ├── tests.py        [单元测试，不要动]</span><br><span class="line">    └── views.py        [视图函数,do_login]               【经常使用】</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.9 manage.py startapp web</span><br></pre></td></tr></table></figure>

<p><img src="/assets/image-20220511101638677.png" alt="image-20220511101638677"></p>
<p><img src="/assets/image-20220511101657141.png" alt="image-20220511101657141"></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li><p>安装django框架</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django==3</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建项目</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">day08</span><br><span class="line">├── manage.py           [管理项目文件，例如：运行、类自动生成数据表]</span><br><span class="line">└── day08</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── settings.py     [项目配置文件，例如：连接那个数据... ]</span><br><span class="line">    ├── urls.py         [根路由，URL和函数的对应关系  /x1/login -&gt;do_login ]</span><br><span class="line">    ├── asgi.py         [异步运行项目，编写socket，处理网络请求]</span><br><span class="line">    └── wsgi.py         [同步运行项目，编写socket，处理网络请求]</span><br></pre></td></tr></table></figure>

<ul>
<li><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject 项目名</span><br></pre></td></tr></table></figure>
</li>
<li><p>Pycharm</p>
</li>
</ul>
</li>
<li><p>创建app</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.9 manage.py startapp web</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">day08</span><br><span class="line">├── manage.py           [管理项目文件，例如：运行、类自动生成数据表]</span><br><span class="line">└── day08</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── settings.py     [项目配置文件，例如：连接那个数据... ]</span><br><span class="line">    ├── urls.py         [根路由，URL和函数的对应关系  /x1/login -&gt;do_login ]</span><br><span class="line">    ├── asgi.py         [异步运行项目，编写socket，处理网络请求]</span><br><span class="line">    └── wsgi.py         [同步运行项目，编写socket，处理网络请求]</span><br><span class="line">└── web，网站</span><br><span class="line">    ├── __init__.py</span><br><span class="line">    ├── admin.py        [内部后台管理的配置，不要懂]</span><br><span class="line">    ├── apps.py         [App名字，不要动]</span><br><span class="line">    ├── migrations      [迁移记录，不要修改他，自动生成]</span><br><span class="line">    │   └── __init__.py</span><br><span class="line">    ├── models.py       [数据库，类-&gt;SQL语句（ORM）]        【经常使用】</span><br><span class="line">    ├── tests.py        [单元测试，不要动]</span><br><span class="line">    └── views.py        [视图函数,do_login]               【经常使用】</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写业务代码</p>
<ul>
<li><p>urls.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> web.views <span class="keyword">import</span> login</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;admin/&#x27;</span>, admin.site.urls),</span><br><span class="line">    path(<span class="string">&#x27;login/&#x27;</span>, login),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>views.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;登录页面&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>启动项目</p>
<ul>
<li><p>命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.9 manage.py runserver </span><br></pre></td></tr></table></figure>
</li>
<li><p>Pycharm</p>
</li>
</ul>
</li>
</ul>
<h2 id="2-初识视图函数"><a href="#2-初识视图函数" class="headerlink" title="2.初识视图函数"></a>2.初识视图函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib <span class="keyword">import</span> admin</span><br><span class="line"><span class="keyword">from</span> django.urls <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> web.views <span class="keyword">import</span> login</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(<span class="string">&#x27;login/&#x27;</span>, login),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> HttpResponse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">login</span>(<span class="params">request</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># ...例如：用户名、密码  -&gt; 数据库校验</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">&quot;登录页面&quot;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>request是什么？用户请求相关的所有内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">去request中获取用户提交的数据等信息</span><br></pre></td></tr></table></figure>
</li>
<li><p>中间，业务逻辑操作</p>
</li>
<li><p>返回值，返回的什么体现用户浏览器的行为不同。</p>
<ul>
<li><code>return HttpResponse(&quot;登录页面&quot;)</code></li>
<li><code>return render(request, &quot;login.html&quot;)</code></li>
<li><code>return redirect(&quot;https://www.baidu.com&quot;)</code></li>
</ul>
</li>
</ul>
<p>如果开发中用到了<code>return render(request, &quot;login.html&quot;)</code> 寻找HTML模板：</p>
<ul>
<li><p>根目录下的templates中找【优先】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="string">&#x27;templates&#x27;</span>)],</span><br><span class="line">        <span class="string">&#x27;APP_DIRS&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;context_processors&#x27;</span>: [</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.debug&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.request&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据app的注册顺序，逐一去每个app目录下templates文件夹中寻找</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;web.apps.WebConfig&quot;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><ul>
<li><p>参数，去request中获取值</p>
</li>
<li><p>中间，…</p>
</li>
<li><p>返回值</p>
<ul>
<li><p>settings.py</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">&#x27;django.contrib.admin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.auth&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.contenttypes&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.staticfiles&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;web.apps.WebConfig&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&#x27;BACKEND&#x27;</span>: <span class="string">&#x27;django.template.backends.django.DjangoTemplates&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;DIRS&#x27;</span>: [os.path.join(BASE_DIR, <span class="string">&#x27;templates&#x27;</span>)],</span><br><span class="line">        <span class="string">&#x27;APP_DIRS&#x27;</span>: <span class="literal">True</span>,</span><br><span class="line">        <span class="string">&#x27;OPTIONS&#x27;</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;context_processors&#x27;</span>: [</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.debug&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.template.context_processors.request&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.auth.context_processors.auth&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;django.contrib.messages.context_processors.messages&#x27;</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>单独app的模板，在app中写； 公共的就在最外层的templates中写HTML模板。</p>
</li>
</ul>
</li>
</ul>
<h2 id="3-初识模板"><a href="#3-初识模板" class="headerlink" title="3.初识模板"></a>3.初识模板</h2><p>web框架中都要用到模板的语法，用看的值是动态的。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">user_list</span>(<span class="params">request</span>):</span><br><span class="line">    <span class="comment"># 1.数据库获取所有的用户列表</span></span><br><span class="line">    data = [<span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;李立权&quot;</span>, <span class="string">&quot;张弛&quot;</span>]</span><br><span class="line"></span><br><span class="line">    mapping = &#123;<span class="string">&quot;name&quot;</span>: <span class="string">&quot;武沛齐&quot;</span>, <span class="string">&quot;age&quot;</span>: <span class="number">19</span>, <span class="string">&quot;size&quot;</span>: <span class="number">18</span>&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 2.打开文件并读取内容</span></span><br><span class="line">    <span class="comment"># 3.模板的渲染 -&gt; 文本替换</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">&quot;user_list.html&quot;</span>, &#123;<span class="string">&quot;message&quot;</span>: <span class="string">&quot;标题来了&quot;</span>, <span class="string">&quot;data_list&quot;</span>: data, <span class="string">&quot;xx&quot;</span>: mapping&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    &#123;% for item in data_list %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;&#123; data_list.0 &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;&#123; data_list.1 &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span>&#123;&#123; data_list.2 &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; xx.name &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; xx.age &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; xx.size &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    &#123;% for item in xx.keys %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    &#123;% for item in xx.values %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; item &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    &#123;% for k,v in xx.items %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;&#123; k &#125;&#125;   &#123;&#123; v &#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="案例：号码列表"><a href="#案例：号码列表" class="headerlink" title="案例：号码列表"></a>案例：号码列表</h2><ul>
<li>URL访问</li>
<li>去数据库获取号码列表</li>
<li>页面上展示</li>
</ul>
<p><img src="/assets/image-20220511111746057.png" alt="image-20220511111746057"></p>
<p><img src="/assets/image-20220511111812195.png" alt="image-20220511111812195"></p>
<p><img src="/assets/image-20220511111825229.png" alt="image-20220511111825229"></p>
<p><img src="/assets/image-20220511111833728.png" alt="image-20220511111833728"></p>
<h2 id="4-静态文件处理"><a href="#4-静态文件处理" class="headerlink" title="4.静态文件处理"></a>4.静态文件处理</h2><p>图片、css、js等。</p>
<ul>
<li><p>静态文件放在app目录下  static 文件夹中</p>
</li>
<li><p>页面中使用</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;% load static %&#125;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&#123;% static &#x27;bootstrap-3.4.1/css/bootstrap.min.css&#x27; %&#125;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>号码列表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">	...</span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;jquery-3.6.0.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&#123;% static &#x27;bootstrap-3.4.1/js/bootstrap.min.js&#x27; %&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="案例：登录-跳转"><a href="#案例：登录-跳转" class="headerlink" title="案例：登录&amp;跳转"></a>案例：登录&amp;跳转</h2><p><img src="/assets/image-20220511134219856.png" alt="image-20220511134219856"></p>
<ul>
<li><p>移除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">MIDDLEWARE = [</span><br><span class="line">    <span class="string">&#x27;django.middleware.security.SecurityMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.sessions.middleware.SessionMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.common.CommonMiddleware&#x27;</span>,</span><br><span class="line">    <span class="comment">#&#x27;django.middleware.csrf.CsrfViewMiddleware&#x27;,</span></span><br><span class="line">    <span class="string">&#x27;django.contrib.auth.middleware.AuthenticationMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.contrib.messages.middleware.MessageMiddleware&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;django.middleware.clickjacking.XFrameOptionsMiddleware&#x27;</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
</li>
<li><p>生成token</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>用户登录<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">action</span>=<span class="string">&quot;/login/&quot;</span>&gt;</span></span><br><span class="line">        &#123;% csrf_token %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>提 交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: red;&quot;</span>&gt;</span>&#123;&#123; error &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="5-ORM"><a href="#5-ORM" class="headerlink" title="5.ORM"></a>5.ORM</h2><p>ORM，对象关系映射。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>:</span><br><span class="line">    <span class="built_in">id</span> = IntegerField</span><br><span class="line">    name = CharField</span><br><span class="line">    age = IntegerField</span><br><span class="line">    email = CharField</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj1 = UserInfo(id=x,name=x,age=x,email=x)</span><br><span class="line">obj2 = UserInfo(id=x,name=x,age=x,email=x)</span><br><span class="line">obj3 = UserInfo(id=x,name=x,age=x,email=x)</span><br><span class="line">obj4 = UserInfo(id=x,name=x,age=x,email=x)</span><br></pre></td></tr></table></figure>



<p>出现的目的：便于项目中对数据库进行操作。</p>
<ul>
<li>创建表机构 &amp; 修改表结构。</li>
<li>表中的数据进行操作。</li>
</ul>
<h3 id="5-1-自己创建数据库"><a href="#5-1-自己创建数据库" class="headerlink" title="5.1 自己创建数据库"></a>5.1 自己创建数据库</h3><p><img src="/assets/image-20220511141821859.png" alt="image-20220511141821859"></p>
<h3 id="5-2-创建表"><a href="#5-2-创建表" class="headerlink" title="5.2 创建表"></a>5.2 创建表</h3><p>去app下的models.py中创建指定的类 + 命令，自动创建表。</p>
<h4 id="5-2-1-编写类"><a href="#5-2-1-编写类" class="headerlink" title="5.2.1 编写类"></a>5.2.1 编写类</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;姓名&quot;</span>, max_length=<span class="number">16</span>)  <span class="comment"># varchar</span></span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;姓名&quot;</span>)  <span class="comment"># int</span></span><br><span class="line">    email = models.CharField(verbose_name=<span class="string">&quot;邮箱&quot;</span>, max_length=<span class="number">32</span>)  <span class="comment"># varchar</span></span><br></pre></td></tr></table></figure>

<p><img src="/assets/image-20220511142312246.png" alt="image-20220511142312246"></p>
<h4 id="5-2-2-命令"><a href="#5-2-2-命令" class="headerlink" title="5.2.2 命令"></a>5.2.2 命令</h4><ul>
<li><p>先连接数据库：day08</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;day08&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;root123&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>python代码连接数据库：pymysql、mysqlclient</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.9 install mysqlclient</span><br></pre></td></tr></table></figure></li>
</ul>
<p>接下来，再去执行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3.9 manage.py makemigrations</span><br><span class="line">python3.9 manage.py migrate</span><br></pre></td></tr></table></figure>

<ul>
<li><p>makemigrations，读取已经注册所有的app中的models.py文件，根据类生成配置文件并放到app下的migrations目录</p>
</li>
<li><p>migrate，根据配置文件自动生成相应的SQL语句。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table demo_userinfo(</span><br><span class="line">	id int ....,</span><br><span class="line">	name ..,</span><br><span class="line">	age ..,</span><br><span class="line">	email ..</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h4><ul>
<li><p>自己创建数据库</p>
</li>
<li><p>django配置连接数据库</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;day08&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;root123&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="number">3306</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>python操作msyql模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3.9 install mysqlclient</span><br></pre></td></tr></table></figure>
</li>
<li><p>models.py【经常】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;用户名&quot;</span>, max_length=<span class="number">16</span>)  <span class="comment"># varchar</span></span><br><span class="line">    pwd = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>) <span class="comment"># varchar</span></span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;姓名&quot;</span>)  <span class="comment"># int</span></span><br><span class="line">    email = models.CharField(verbose_name=<span class="string">&quot;邮箱&quot;</span>, max_length=<span class="number">32</span>)  <span class="comment"># varchar</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Department</span>(models.Model):</span><br><span class="line">    caption = models.CharField(verbose_name=<span class="string">&quot;标题&quot;</span>, max_length=<span class="number">32</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令【经常】</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">python3<span class="number">.9</span> manage.py makemigrations</span><br><span class="line">python3<span class="number">.9</span> manage.py migrate</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-3-数据操作"><a href="#5-3-数据操作" class="headerlink" title="5.3 数据操作"></a>5.3 数据操作</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># models.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserInfo</span>(models.Model):</span><br><span class="line">    name = models.CharField(verbose_name=<span class="string">&quot;用户名&quot;</span>, max_length=<span class="number">16</span>)  <span class="comment"># varchar</span></span><br><span class="line">    pwd = models.CharField(verbose_name=<span class="string">&quot;密码&quot;</span>, max_length=<span class="number">64</span>) <span class="comment"># varchar</span></span><br><span class="line">    age = models.IntegerField(verbose_name=<span class="string">&quot;姓名&quot;</span>)  <span class="comment"># int</span></span><br><span class="line">    email = models.CharField(verbose_name=<span class="string">&quot;邮箱&quot;</span>, max_length=<span class="number">32</span>)  <span class="comment"># varchar</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>新增</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.create(name=<span class="string">&quot;wupeiqi&quot;</span>,pwd=<span class="string">&quot;123&quot;</span>,age=<span class="number">19</span>,email=<span class="string">&#x27;xxx@live.com&#x27;</span>)</span><br><span class="line"></span><br><span class="line">models.UserInfo.objects.create(**&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;wupeiqi&quot;</span>,<span class="string">&quot;pwd&quot;</span>:<span class="string">&quot;123&quot;</span>,<span class="string">&quot;age&quot;</span>:<span class="number">19</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;xxx@live.com&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># queryset=[ obj,obj,obj,obj ]     obj.id  obj.name  obj.age  obj.pwd    []</span></span><br><span class="line">v1 = models.UserInfo.objects.<span class="built_in">filter</span>(name=<span class="string">&quot;wupeiqi&quot;</span>,age=<span class="number">19</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># queryset=[ obj,obj,obj,obj ]     obj.id  obj.name  obj.age  obj.pwd   []</span></span><br><span class="line">v2 = models.UserInfo.objects.<span class="built_in">all</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># obj        obj.id  obj.name</span></span><br><span class="line">v3 = models.UserInfo.objects.<span class="built_in">filter</span>(name=<span class="string">&quot;wupeiqi&quot;</span>,age=<span class="number">19</span>).first()</span><br><span class="line"><span class="comment"># 注意：未查询到数据时候返回None</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>删除</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.<span class="built_in">all</span>().delete()</span><br><span class="line"></span><br><span class="line">models.UserInfo.objects.<span class="built_in">filter</span>(name=<span class="string">&quot;wupeiqi&quot;</span>,age=<span class="number">19</span>).delete()</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">models.UserInfo.objects.<span class="built_in">all</span>().update(age=<span class="number">19</span>)</span><br><span class="line"></span><br><span class="line">models.UserInfo.objects.<span class="built_in">filter</span>(<span class="built_in">id</span>=<span class="number">10</span>).update(age=<span class="number">19</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="案例：部门信息"><a href="#案例：部门信息" class="headerlink" title="案例：部门信息"></a>案例：部门信息</h2><p><img src="/assets/image-20220511145938903.png" alt="image-20220511145938903"></p>
<p><img src="/assets/image-20220511150553058.png" alt="image-20220511150553058"></p>
<p><img src="/assets/image-20220511150613726.png" alt="image-20220511150613726"></p>
<p><img src="/assets/image-20220511151336175.png" alt="image-20220511151336175"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li><p>Django框架</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install django==3</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建项目</p>
</li>
<li><p>配置</p>
<ul>
<li>注册App</li>
<li>MySQL连接（数据库先创建）</li>
</ul>
</li>
<li><p>在app目录下的models.py中创建表结构</p>
<ul>
<li>写models</li>
<li>命令</li>
</ul>
</li>
<li><p>写功能代码</p>
<ul>
<li>urls.py</li>
<li>views.py 【基于ORM对数据库中的表数据进行操作】</li>
<li>templates</li>
</ul>
</li>
<li><p>静态文件配置（CSS、JS、图片）</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2023/11/17/day08%20Django%E5%9F%BA%E7%A1%80/" data-id="clp21f7s00000ugus9o6c8203" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/11/17/test-at-10-55/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">test at 10:55</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/11/17/day08%20Django%E5%9F%BA%E7%A1%80/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/11/17/test-at-10-55/">test at 10:55</a>
          </li>
        
          <li>
            <a href="/2023/11/17/test/">test</a>
          </li>
        
          <li>
            <a href="/2023/11/17/%E5%BC%A0%E8%80%80%E4%B8%B9%E7%BA%AF%E5%82%BB%E9%80%BC/">张耀丹纯傻逼</a>
          </li>
        
          <li>
            <a href="/2023/11/17/%E5%BC%A0%E8%80%80%E4%B8%B9%E6%98%AF%E5%82%BB%E9%80%BC/">张耀丹是傻逼</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>